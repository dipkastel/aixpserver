<div class="col-9 border border-secondary rounded bg-dark">
  <div class="row">
    <a class="btn btn-secondary btn-sm lay-button" (click)="undo()">
      <span class="glyphicon glyphicon-arrow-left"></span>
    </a>
    <a class="btn btn-secondary btn-sm lay-button" (click)="erase()">
      <span class="glyphicon glyphicon-erase"></span>
    </a>
  </div>
  <canvas #ImageLayoutCanvas width="600" height="400" class="layout-canvas" (mousemove)="onMouseMove($event)"
          (mousedown)="clickOnCanvas($event)" (mouseup)="DragOnCanvas($event,ModalAddLayer)"
          (dblclick)="clickOnCanvas($event,ModalAddLayer,true)"></canvas>
</div>
<div class="col-3 border border-secondary rounded bg-dark">
  <ul>
    <li *ngFor="let item of obs | async " class="layout-lable" (mouseover)="mouseOver(item)"
        (mouseleave)="mouseLeave()">{{item.category.name + "-" + item.type}}</li>
  </ul>
</div>

<!--modal add layer-->
<ng-template #ModalAddLayer let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="ModalAddLayer">add new Layer</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <form #formAddLayer="ngForm" (ngSubmit)="addNewLayer(formAddLayer.value)" >
    <div class="modal-body">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Select Category :</mat-label>
        <mat-select [formControl]="selectControl" [(value)]="SelectedCat">
          <mat-optgroup *ngFor="let group of categoriesObs | async" [label]="group.parent.name"
                        [disabled]="group.disabled">
            <mat-option *ngFor="let subItem of group.childs" [value]="subItem.id">
              {{subItem.name}}
            </mat-option>
          </mat-optgroup>
        </mat-select>
      </mat-form-field>

      <input class="form-check-input" type="checkbox" value="" id="selectCatInsertMode"
             (change)="addCategoryMode = !addCategoryMode">
      <label class="form-check-label form-label" for="selectCatInsertMode">
        add category
      </label>
      <form #addCategoryForm class="add-cat-form" *ngIf="addCategoryMode" (ngSubmit)="addCategory(addCategoryForm)">
        <mat-form-field class="full-width">
          <mat-label>category name :</mat-label>
          <input name="categoryNameToAdd" matInput placeholder="Ex. car" value="">
        </mat-form-field>
        <mat-form-field  appearance="fill" class="full-width">
          <mat-label>super Category :</mat-label>
          <mat-select [(value)]="SelectedSuperCatToAdd" >
            <mat-option  >
              it's super category
            </mat-option>
            <mat-option *ngFor="let item of categoriesObs | async" [value]="item.parent.id">
              {{item.parent.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>


        <button type="submit" class="btn btn-success" >add</button>
      </form>

    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="modal.dismiss()">Close</button>
      <button type="submit" class="btn btn-success" (click)="modal.dismiss('success')">create</button>
    </div>
  </form>
</ng-template>
